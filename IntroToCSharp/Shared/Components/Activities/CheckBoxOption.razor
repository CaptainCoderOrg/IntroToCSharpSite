@inject NavigationManager NavigationManager

    <MudElement Class="pa-0 d-flex align-content-center rounded" Style="@GetStyle()">

@if(this.Parent.IsMultiSelect) {
    <MudCheckBox Disabled="@IsSubmitted" Color="Color.Dark" @bind-Checked="@IsChecked" Label="@Text"></MudCheckBox>
} else {
    <MudRadio Disabled="@IsSubmitted" Option="@Text" Color="Color.Primary" UnCheckedColor="Color.Default">@Text</MudRadio>
}
    </MudElement>

@code {
    [Parameter]
    public string Text { get; set; }
    [Parameter]
    public bool IsCorrect { get; set; }
    [Parameter]
    public bool IsChecked { get; set; } = false;
    public bool IsSubmitted { get; set; } = false;
    public bool IsSubmissionCorrect => (this.IsChecked && this.IsCorrect) || (!this.IsChecked && !this.IsCorrect);

    [CascadingParameter]
    public MultipleChoiceQuestion Parent { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        this.Parent.AddOption(this);
    }

    private string GetStyle()
    {
        if (!this.IsSubmitted || !this.IsChecked) return string.Empty;

        // Incorrect answers should highlight red
        if (this.IsCorrect) return $"background: {Themes.s_CSharpTheme.Palette.SuccessLighten.ToString()}; color: {Themes.s_CSharpTheme.Palette.Black.ToString()}";
        return $"background: {Themes.s_CSharpTheme.Palette.ErrorLighten.ToString()}; color: {Themes.s_CSharpTheme.Palette.White.ToString()}";

    }

    public void Reset()
    {
        this.IsChecked = false;
        this.IsSubmitted = false;
        this.StateHasChanged();
    }
    public bool CheckAnswer()
    {
        this.IsSubmitted = true;
        return IsSubmissionCorrect;
    }
}